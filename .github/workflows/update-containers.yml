name: Update Containers
"on":
    workflow_dispatch: {}
    workflow_run:
        workflows:
            - Update Workflow
        types:
            - completed
concurrency: dockerfiles
permissions:
    contents: write
jobs:
    alpine:
        name: Build alpine
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build alpine
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" alpine
    base:
        name: Build base
        runs-on: ubuntu-latest
        needs:
            - baseroot
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build base
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" base
    baseroot:
        name: Build baseroot
        runs-on: ubuntu-latest
        needs:
            - alpine
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build baseroot
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" baseroot
    centauri:
        name: Build centauri
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build centauri
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" centauri
    commit-changes:
        name: Commit updated files
        runs-on: ubuntu-latest
        needs:
            - alpine
            - base
            - baseroot
            - centauri
            - dockercleanup
            - dotege
            - dsp
            - ergo
            - gamja
            - githubmirror
            - golang
            - golink
            - goplum
            - httpredirect
            - identd
            - immich
            - irc-bot
            - irc-distribution
            - irc-github
            - irc-goplum
            - irc-notifier
            - irc-webhook
            - linx-server
            - miniflux
            - node
            - postgres-15
            - puzzles
            - redis
            - registryauth
            - rust
            - soju
            - sws
            - texlive
            - thelounge
            - tsp
            - vaultwarden
            - watchtower
            - webhooked
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
              with:
                token: ${{ secrets.GITHUB_TOKEN }}
            - name: Setup Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Update all Containerfiles with built image digests
              run: |
                set -e
                echo 'Updating all Containerfiles with built image digests...'
                dfo single --registry "${{ secrets.REGISTRY }}" alpine
                dfo single --registry "${{ secrets.REGISTRY }}" base
                dfo single --registry "${{ secrets.REGISTRY }}" baseroot
                dfo single --registry "${{ secrets.REGISTRY }}" centauri
                dfo single --registry "${{ secrets.REGISTRY }}" dockercleanup
                dfo single --registry "${{ secrets.REGISTRY }}" dotege
                dfo single --registry "${{ secrets.REGISTRY }}" dsp
                dfo single --registry "${{ secrets.REGISTRY }}" ergo
                dfo single --registry "${{ secrets.REGISTRY }}" gamja
                dfo single --registry "${{ secrets.REGISTRY }}" githubmirror
                dfo single --registry "${{ secrets.REGISTRY }}" golang
                dfo single --registry "${{ secrets.REGISTRY }}" golink
                dfo single --registry "${{ secrets.REGISTRY }}" goplum
                dfo single --registry "${{ secrets.REGISTRY }}" httpredirect
                dfo single --registry "${{ secrets.REGISTRY }}" identd
                dfo single --registry "${{ secrets.REGISTRY }}" immich
                dfo single --registry "${{ secrets.REGISTRY }}" irc-bot
                dfo single --registry "${{ secrets.REGISTRY }}" irc-distribution
                dfo single --registry "${{ secrets.REGISTRY }}" irc-github
                dfo single --registry "${{ secrets.REGISTRY }}" irc-goplum
                dfo single --registry "${{ secrets.REGISTRY }}" irc-notifier
                dfo single --registry "${{ secrets.REGISTRY }}" irc-webhook
                dfo single --registry "${{ secrets.REGISTRY }}" linx-server
                dfo single --registry "${{ secrets.REGISTRY }}" miniflux
                dfo single --registry "${{ secrets.REGISTRY }}" node
                dfo single --registry "${{ secrets.REGISTRY }}" postgres-15
                dfo single --registry "${{ secrets.REGISTRY }}" puzzles
                dfo single --registry "${{ secrets.REGISTRY }}" redis
                dfo single --registry "${{ secrets.REGISTRY }}" registryauth
                dfo single --registry "${{ secrets.REGISTRY }}" rust
                dfo single --registry "${{ secrets.REGISTRY }}" soju
                dfo single --registry "${{ secrets.REGISTRY }}" sws
                dfo single --registry "${{ secrets.REGISTRY }}" texlive
                dfo single --registry "${{ secrets.REGISTRY }}" thelounge
                dfo single --registry "${{ secrets.REGISTRY }}" tsp
                dfo single --registry "${{ secrets.REGISTRY }}" vaultwarden
                dfo single --registry "${{ secrets.REGISTRY }}" watchtower
                dfo single --registry "${{ secrets.REGISTRY }}" webhooked
            - name: Commit and push changes
              run: |-
                git config user.name "github-actions[bot]"
                git config user.email "github-actions[bot]@users.noreply.github.com"
                git add .
                if git diff --staged --quiet; then
                  echo "No changes to commit"
                else
                  git commit -m "Update Containerfiles and BOMs with built image digests"
                  git pull --rebase origin $(git branch --show-current)
                  git push
                fi
    dockercleanup:
        name: Build dockercleanup
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build dockercleanup
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" dockercleanup
    dotege:
        name: Build dotege
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build dotege
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" dotege
    dsp:
        name: Build dsp
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build dsp
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" dsp
    ergo:
        name: Build ergo
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build ergo
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" ergo
    gamja:
        name: Build gamja
        runs-on: ubuntu-latest
        needs:
            - alpine
            - base
            - node
            - sws
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build gamja
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" gamja
    githubmirror:
        name: Build githubmirror
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build githubmirror
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" githubmirror
    golang:
        name: Build golang
        runs-on: ubuntu-latest
        needs:
            - alpine
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build golang
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" golang
    golink:
        name: Build golink
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build golink
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" golink
    goplum:
        name: Build goplum
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build goplum
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" goplum
    httpredirect:
        name: Build httpredirect
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build httpredirect
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" httpredirect
    identd:
        name: Build identd
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build identd
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" identd
    immich:
        name: Build immich
        runs-on: ubuntu-latest
        needs:
            - alpine
            - node
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build immich
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" immich
    irc-bot:
        name: Build irc-bot
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-bot
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-bot
    irc-distribution:
        name: Build irc-distribution
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-distribution
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-distribution
    irc-github:
        name: Build irc-github
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-github
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-github
    irc-goplum:
        name: Build irc-goplum
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-goplum
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-goplum
    irc-notifier:
        name: Build irc-notifier
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-notifier
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-notifier
    irc-webhook:
        name: Build irc-webhook
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build irc-webhook
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" irc-webhook
    linx-server:
        name: Build linx-server
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build linx-server
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" linx-server
    miniflux:
        name: Build miniflux
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build miniflux
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" miniflux
    node:
        name: Build node
        runs-on: ubuntu-latest
        needs:
            - alpine
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build node
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" node
    postgres-15:
        name: Build postgres-15
        runs-on: ubuntu-latest
        needs:
            - alpine
            - base
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build postgres-15
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" postgres-15
    puzzles:
        name: Build puzzles
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build puzzles
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" puzzles
    redis:
        name: Build redis
        runs-on: ubuntu-latest
        needs:
            - alpine
            - base
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build redis
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" redis
    registryauth:
        name: Build registryauth
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build registryauth
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" registryauth
    rust:
        name: Build rust
        runs-on: ubuntu-latest
        needs:
            - alpine
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build rust
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" rust
    soju:
        name: Build soju
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build soju
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" soju
    sws:
        name: Build sws
        runs-on: ubuntu-latest
        needs:
            - base
            - rust
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build sws
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" sws
    texlive:
        name: Build texlive
        runs-on: ubuntu-latest
        needs:
            - alpine
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build texlive
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" texlive
    thelounge:
        name: Build thelounge
        runs-on: ubuntu-latest
        needs:
            - base
            - node
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build thelounge
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" thelounge
    tsp:
        name: Build tsp
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build tsp
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" tsp
    vaultwarden:
        name: Build vaultwarden
        runs-on: ubuntu-latest
        needs:
            - base
            - rust
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build vaultwarden
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" vaultwarden
    watchtower:
        name: Build watchtower
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build watchtower
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" watchtower
    webhooked:
        name: Build webhooked
        runs-on: ubuntu-latest
        needs:
            - base
            - golang
        steps:
            - name: Checkout code
              uses: actions/checkout@v6
            - name: Set up Go
              uses: actions/setup-go@v6
              with:
                cache: "false"
                go-version: stable
            - name: Install latest dfo
              uses: mattdowdell/go-installer@v0.3.0
              with:
                package: github.com/greboid/dfo
            - name: Set up buildah
              uses: redhat-actions/setup-podman@v1
              with:
                dockerfile: "false"
            - name: Login to registry
              uses: redhat-actions/podman-login@v1
              with:
                password: ${{ secrets.REGISTRY_PASS }}
                registry: ${{ secrets.REGISTRY }}
                username: ${{ secrets.REGISTRY_USER }}
            - name: Build webhooked
              run: dfo single --build --push --registry "${{ secrets.REGISTRY }}" webhooked
