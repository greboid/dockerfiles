
on:
  workflow_dispatch:
  schedule:
    - cron: '42 12 * * *'
  push:
    paths-ignore:
      - '**/Containerfile'
      - '**/Dockerfile'
      - '.github/**'
      - 'README.md'
name: Update Containers
concurrency: dockerfiles
permissions:
  contents: write
jobs:
  setup-cache:
    name: Setup cache
    runs-on: ubuntu-latest
    steps:
        - name: Install latest contempt
          uses: mattdowdell/go-installer@v0.3.0
          with:
              package: github.com/csmith/contempt/cmd/contempt
  
  alpine:
    name: Build alpine
    needs:
        - setup-cache

    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: alpine

  rust:
    name: Build rust
    needs:
        - setup-cache
        - alpine
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: rust

  node:
    name: Build node
    needs:
        - setup-cache
        - alpine
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: node

  golang:
    name: Build golang
    needs:
        - setup-cache
        - alpine
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: golang

  baseroot:
    name: Build baseroot
    needs:
        - setup-cache
        - alpine
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: baseroot

  thelounge:
    name: Build thelounge
    needs:
        - setup-cache
        - node
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: thelounge

  dsp:
    name: Build dsp
    needs:
        - setup-cache
        - baseroot
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: dsp

  base:
    name: Build base
    needs:
        - setup-cache
        - baseroot
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: base

  webhooked:
    name: Build webhooked
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: webhooked

  watchtower:
    name: Build watchtower
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: watchtower

  tsp:
    name: Build tsp
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: tsp

  tailscale:
    name: Build tailscale
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: tailscale

  sws:
    name: Build sws
    needs:
        - setup-cache
        - base
        - rust
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: sws

  soju:
    name: Build soju
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: soju

  registryauth:
    name: Build registryauth
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: registryauth

  redis:
    name: Build redis
    needs:
        - setup-cache
        - alpine
        - base
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: redis

  puzzles:
    name: Build puzzles
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: puzzles

  postgres-15:
    name: Build postgres-15
    needs:
        - setup-cache
        - alpine
        - base
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: postgres-15

  miniflux:
    name: Build miniflux
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: miniflux

  linx-server:
    name: Build linx-server
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: linx-server

  legoergo:
    name: Build legoergo
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: legoergo

  irc-webhook:
    name: Build irc-webhook
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-webhook

  irc-notifier:
    name: Build irc-notifier
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-notifier

  irc-goplum:
    name: Build irc-goplum
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-goplum

  irc-github:
    name: Build irc-github
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-github

  irc-distribution:
    name: Build irc-distribution
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-distribution

  irc-bot:
    name: Build irc-bot
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: irc-bot

  identd:
    name: Build identd
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: identd

  httpredirect:
    name: Build httpredirect
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: httpredirect

  goplum:
    name: Build goplum
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: goplum

  golink:
    name: Build golink
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: golink

  githubmirror:
    name: Build githubmirror
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: githubmirror

  dotege:
    name: Build dotege
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: dotege

  dockercleanup:
    name: Build dockercleanup
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: dockercleanup

  centauri:
    name: Build centauri
    needs:
        - setup-cache
        - base
        - golang
    uses: ./.github/workflows/container-builder.yml
    secrets: inherit
    with:
        PROJECT_NAME: centauri

