
on:
  workflow_dispatch:
  schedule:
    - cron: '42 12 * * *'
  push:
    paths-ignore:
      - '**/Containerfile'
      - '**/Dockerfile'
      - '.github/**'
      - 'README.md'
name: Update Containers
concurrency: dockerfiles
permissions:
  contents: write
jobs:
  setup-cache:
    name: Setup cache
    runs-on: ubuntu-latest
    steps:
      - name: Get contempt version
        id: contempt
        uses: tdemin/find-latest-tag@v1
        with:
          repo: https://github.com/csmith/contempt.git
      - name: Get Paths
        id: go-paths
        run: |
          echo "go-path=$(go env GOPATH)" >> $GITHUB_OUTPUT
      - name: Go bin Cache
        uses: actions/cache@v4
        with:
          path: ${{ steps.go-paths.outputs.go-path }}/bin
          key: ${{ runner.os }}-go-build-${{ steps.contempt.outputs.tag }}
  
  alpine:
    name: Build alpine
    runs-on: ubuntu-latest
    needs:
        - setup-cache
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  rust:
    name: Build rust
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  node:
    name: Build node
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  golang:
    name: Build golang
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  baseroot:
    name: Build baseroot
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  thelounge:
    name: Build thelounge
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - node
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  dsp:
    name: Build dsp
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - baseroot
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  base:
    name: Build base
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - baseroot
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  webhooked:
    name: Build webhooked
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  watchtower:
    name: Build watchtower
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  tsp:
    name: Build tsp
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  tailscale:
    name: Build tailscale
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  sws:
    name: Build sws
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - rust
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  soju:
    name: Build soju
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  registryauth:
    name: Build registryauth
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  redis:
    name: Build redis
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
        - base
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  puzzles:
    name: Build puzzles
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  postgres-15:
    name: Build postgres-15
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - alpine
        - base
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  miniflux:
    name: Build miniflux
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  linx-server:
    name: Build linx-server
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  legoergo:
    name: Build legoergo
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-webhook:
    name: Build irc-webhook
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-notifier:
    name: Build irc-notifier
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-goplum:
    name: Build irc-goplum
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-github:
    name: Build irc-github
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-distribution:
    name: Build irc-distribution
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  irc-bot:
    name: Build irc-bot
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  identd:
    name: Build identd
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  httpredirect:
    name: Build httpredirect
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  goplum:
    name: Build goplum
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  golink:
    name: Build golink
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  githubmirror:
    name: Build githubmirror
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  dotege:
    name: Build dotege
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  dockercleanup:
    name: Build dockercleanup
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


  centauri:
    name: Build centauri
    runs-on: ubuntu-latest
    needs:
        - setup-cache
        - base
        - golang
    steps:
      - uses: actions/checkout@v4
      - uses: ./.github/actions/container-builder
        with:
          PROJECT_NAME: {{ target.name }}
          REGISTRY_USER: ${{ secrets.REGISTRY_USER }}
          REGISTRY_PASS: ${{ secrets.REGISTRY_PASS }}
          REGISTRY: ${{ secrets.REGISTRY }}
          GIT_USERNAME: ${{ secrets.GIT_USERNAME }}
          GIT_EMAIL: ${{ secrets.GIT_EMAIL }}
          CONTEMPT_TOKEN: ${{ secrets.CONTEMPT_TOKEN }}


