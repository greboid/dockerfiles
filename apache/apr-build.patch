diff --git a/build/apr_common.m4 b/build/apr_common.m4
index f4e2dfd0..2d3245b8 100644
--- a/build/apr_common.m4
+++ b/build/apr_common.m4
@@ -505,7 +505,10 @@ AC_DEFUN([APR_TRY_COMPILE_NO_WARNING],
  fi
  AC_COMPILE_IFELSE(
   [AC_LANG_SOURCE(
-   [#include "confdefs.h"
+   [
+#ifndef PACKAGE_NAME
+#include "confdefs.h"
+#endif
    ]
    [[$1]]
    [int main(int argc, const char *const *argv) {]
-- 
2.34.1
